<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # ----------------------------------------------------------------------
    # 1. PROXY TO BACKEND (Node.js on Port 8080)
    # ----------------------------------------------------------------------
    # Send all API requests to the running Node server
    RewriteRule ^api/(.*)$ http://127.0.0.1:8080/api/$1 [P,L]
    
    # Send CCAvenue payment requests to the running Node server
    RewriteRule ^ccav/(.*)$ http://127.0.0.1:8080/ccav/$1 [P,L]

    # ----------------------------------------------------------------------
    # 2. FRONTEND ROUTING (React / Vite SPA)
    # ----------------------------------------------------------------------
    # If the request is for a real file or directory, serve it directly
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Otherwise, send everything else to index.html so React can handle the route
    RewriteRule ^ index.html [L]
</IfModule>